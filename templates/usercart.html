<!--
Au<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
{% load static %}
<!DOCTYPE HTML>
<html>
<head>
<title>E-CART </title>
<!--css-->
<link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css" media="all"/>
<link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css" media="all" />
<link href="{% static 'css/font-awesome.css' %}" rel="stylesheet">
<!--css-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="New Shop Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<script src="{% static 'js/jquery.min.js' %}"></script>
<link href="//fonts.googleapis.com/css?family=Cagliostro" rel='stylesheet' type='text/css'>
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,800italic,800,700italic,700,600italic,600,400italic,300italic,300" rel='stylesheet' type='text/css'>
<!--search jQuery-->
	<script src="{% static 'js/main.js' %}"></script>
<!--search jQuery-->

 <!--mycart-->
<script type="text/javascript" src="{% static 'js/bootstrap-3.1.1.min.js' %}"></script>
 <!-- cart -->
<script src="{% static 'js/simpleCart.min.js' %}"></script>
<!-- cart -->
</head>
<body>
	<!--header-->
		<div class="header">
			<div class="header-top">
				<div class="container">
					 <div class="top-left">
						<a href="#"> Help  <i class="glyphicon glyphicon-phone" aria-hidden="true"></i> +0123-456-789</a>
					</div>
					<div class="top-right">
					<ul>
						<li><a href="checkout.html">Checkout</a></li>
						{% if user.is_authenticated %}
						<li><b>{{user.username}}</b></li>
						<li><a href="/userlogout">Logout</a></li>
						{% else %}
						<li><a href="/userlogin">Login</a></li>
						{% endif %}
						<li><a href="registered.html"> Create Account </a></li>
					</ul>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<div class="heder-bottom">
				<div class="container">
					<div class="logo-nav">
						<div class="logo-nav-left">
							<h1><a href="index.html">E-CART <span>Shop anywhere</span></a></h1>
						</div>
						<div class="logo-nav-left1">
							<nav class="navbar navbar-default">
							<!-- Brand and toggle get grouped for better mobile display -->
							<div class="navbar-header nav_2">
								<button type="button" class="navbar-toggle collapsed navbar-toggle1" data-toggle="collapse" data-target="#bs-megadropdown-tabs">
									<span class="sr-only">Toggle navigation</span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
								</button>
							</div> 
							<div class="collapse navbar-collapse" id="bs-megadropdown-tabs">
								<ul class="nav navbar-nav">
									<li class="active"><a href="/" class="act">Home</a></li>	
									<!-- Mega Menu -->
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">Women<b class="caret"></b></a>
										<ul class="dropdown-menu multi-column columns-3">
											<div class="row">
												<div class="col-sm-3  multi-gd-img">
													<ul class="multi-column-dropdown">
														<h6>Submenu1</h6>
														<li><a href="products.html">Clothing</a></li>
														<li><a href="products.html">Wallets</a></li>
														<li><a href="products.html">Shoes</a></li>
														<li><a href="products.html">Watches</a></li>
														<li><a href="products.html"> Underwear </a></li>
														<li><a href="products.html">Accessories</a></li>
													</ul>
												</div>
												<div class="col-sm-3  multi-gd-img">
													<ul class="multi-column-dropdown">
														<h6>Submenu2</h6>
														<li><a href="products.html">Sunglasses</a></li>
														<li><a href="products.html">Wallets,Bags</a></li>
														<li><a href="products.html">Footwear</a></li>
														<li><a href="products.html">Watches</a></li>
														<li><a href="products.html">Accessories</a></li>
														<li><a href="products.html">Jewellery</a></li>
													</ul>
												</div>
												<div class="col-sm-3  multi-gd-img">
														<a href="products.html"><img src="{% static 'images/woo.jpg' %}" alt=" "/></a>
												</div> 
												<div class="col-sm-3  multi-gd-img">
														<a href="products.html"><img src="{% static 'images/woo1.jpg '%}" alt=" "/></a>
												</div>
												<div class="clearfix"></div>
											</div>
										</ul>
									</li>
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">Men <b class="caret"></b></a>
										<ul class="dropdown-menu multi-column columns-3">
											<div class="row">
												<div class="col-sm-3  multi-gd-img">
													<ul class="multi-column-dropdown">
														<h6>Submenu1</h6>
														<li><a href="products.html">Clothing</a></li>
														<li><a href="products.html">Wallets</a></li>
														<li><a href="products.html">Shoes</a></li>
														<li><a href="products.html">Watches</a></li>
														<li><a href="products.html"> Underwear </a></li>
														<li><a href="products.html">Accessories</a></li>
													</ul>
												</div>
												<div class="col-sm-3  multi-gd-img">
													<ul class="multi-column-dropdown">
														<h6>Submenu 2</h6>
														<li><a href="products.html">Sunglasses</a></li>
														<li><a href="products.html">Wallets,Bags</a></li>
														<li><a href="products.html">Footwear</a></li>
														<li><a href="products.html">Watches</a></li>
														<li><a href="products.html">Accessories</a></li>
														<li><a href="products.html">Jewellery</a></li>
													</ul>
												</div>
												<div class="col-sm-3  multi-gd-img">
														<a href="products1.html"><img src="{% static 'images/woo3.jpg' %}" alt=" "/></a>
												</div> 
												<div class="col-sm-3  multi-gd-img">
														<a href="products1.html"><img src="{% static 'images/woo4.jpg' %}" alt=" "/></a>
												</div>
												<div class="clearfix"></div>
											</div>
										</ul>
									</li>
									<li><a href="codes.html">Short Codes</a></li>
									<li><a href="mail.html">Mail Us</a></li>
								</ul>
							</div>
							</nav>
						</div>
						<div class="logo-nav-right">
							<ul class="cd-header-buttons">
								<li><a class="cd-search-trigger" href="#cd-search"> <span></span></a></li>
							</ul> <!-- cd-header-buttons -->
							<div id="cd-search" class="cd-search">
								<form action="#" method="post">
									<input name="Search" type="search" placeholder="Search...">
								</form>
							</div>	
						</div>
						<div class="header-right2">
							<div class="cart box_1">
								<a href="checkout.html">
									<h3> <div class="total">
										<!-- <span class="simpleCart_total"></span> (<span id="simpleCart_quantity" class="simpleCart_quantity"></span> items)</div>
										<img src="{% static 'images/bag.png' %}" alt="" /> -->
									</h3>
								</a>
								<p><a href"" class="simpleCart_empty">									
									<span class="glyphicon glyphicon-shopping-cart" style="color: whitesmoke;"></span>
									<span class="badge badge-light">{{count}}</span><br> Cart</a></p>
								<div class="clearfix"> </div>
							</div>	
						</div>
						<div class="clearfix"> </div>
					</div>
				</div>
			</div>
		</div>
		<!--header-->
		<!--banner-->
		<div class="banner1">
			<div class="container">
				<h3><a href="">Home</a> / <span>Usercart</span></h3>
			</div>
		</div>
	
	 <div class="content">
			<div class="cart-items">
				<div class="container">
					 <h2>My Shopping</h2>

{% block content %}

<style>
    body {
  background: #97cfe5;
  background: -webkit-linear-gradient(to right, #dad6d1, #dbd5e6);
  background:linear-gradient(to right, #fefeff, #b5c1d4);
    min-height: 100vh;
}
</style>

{% if no == 0 %}

<style>
  .mt-100 {
    margin-top: 100px
  }
  
  .card {
    margin-bottom: 30px;
    border: 0;
    -webkit-transition: all .3s ease;
    transition: all .3s ease;
    letter-spacing: .5px;
    border-radius: 8px;
    -webkit-box-shadow: 1px 5px 24px 0 rgba(68, 102, 242, .05);
    box-shadow: 1px 5px 24px 0 rgba(68, 102, 242, .05)
  }
  
  .card .card-header {
    background-color: #fff;
    border-bottom: none;
    padding: 24px;
    border-bottom: 1px solid #f6f7fb;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px
  }
  
  .card-header:first-child {
    border-radius: calc(.25rem - 1px) calc(.25rem - 1px) 0 0
  }
  
  .card .card-body {
    padding: 30px;
    background-color: transparent
  }
  
  .btn-primary,
  .btn-primary.disabled,
  .btn-primary:disabled {
    background-color: #4466f2 !important;
    border-color: #4466f2 !important
  }
  </style>
   	 <div class="container-fluid mt-100">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                
                <div class="card-body cart">
                    <div class="col-sm-12 empty-cart-cls text-center"> <img src="https://i.imgur.com/dCdflKN.png" width="130" height="130" class="img-fluid mb-4 mr-3">
                        <h3><strong>Your Cart is Empty</strong></h3>
						<h4 class="smiley">Add something to happy☻</h4> <a href="/" class="btn btn-primary cart-btn-transform m-3" data-abc="true">continue shopping</a>
					</div>
					
        </div>
    </div>
  </div> 
{% else %} 
<div class="px-4 px-lg-0">
	<div class="pb-5" style="padding-top:8rem !important">
	  <div style="margin-left: 1rem; font-size: 2rem;" class="container">
		<div class="row">
		  <div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
		
			<div class="table-responsive">
			  <table class="table">
				<thead>
					<tr>
						<th scope="col"> Image</th>
						<th scope="col">Product</th>
						<th scope="col" class="text-center">Quantity</th>
						<th scope="col" class="text-right">Price</th>
						<th scope="col" class="text-right">Total</th>
						<th scope="col" class="text-right">Delete</th>

					</tr>
				</thead>
				<tbody>
				{% for item in cart %}
				<tr>
					<td><img src="{{item.product.ImageURL}}"class="img-responsive" style="height: 8em;" > </td>
					<td><b><i>{{item.product.product_name}}</i></b></td>
					
					
					<td style="text-align: center;">
						<form method="POST">
							{% csrf_token %}
						  <button type="button" id="minus{{item.id}}" onclick="this.parentNode.querySelector('input[type=number]').stepDown();minus('{{item.id}}')" class="minus">-</button>
						  <input class="quantity" id="qty{{item.id}}" min="1" name="quantity" value="{{item.quantity}}" type="number" style="width:12%" size="2" disabled autocomplete="off">
						  <button type="button" onclick="this.parentNode.querySelector('input[type=number]').stepUp();plus('{{item.id}}') "  class="plus">+</button>
						</form>
					</td>
						
					
					<td class="text-right">
						<strong id="price">{{item.product.price}}</strong></td>
					<td class="text-right"><strong id="output{{item.id}}">{{item.totalprice}}</strong></td>
				   
					<td ><a href="{% url 'delete_cart_item' item.id %}"><button 
						class="btn btn-danger  "  style="width: auto;float:right;">DELETE</button>
					 </a> </td>
				   

					
				</tr>
			
                {% endfor %}
			</tbody>
		</table>
	  </div>
	  <!-- End -->
	</div>
  </div>

<div class="row py-5 p-4 bg-white rounded shadow-sm">
   
	<div class="col-lg-7 ml-auto">
	  <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold">Order summary:</div>
	  <div class="p-4">
	   <p class="font-italic mb-4"></p> 
		<ul class="list-unstyled mb-4">
		  <li class="d-flex justify-content-between py-3 border-bottom" ><strong class="text-muted">Order Subtotal </strong><strong>₹ <span id="subtotal" class="totalPrice">{{grandtotal}}</span></strong></li>
		  <li class="d-flex justify-content-between py-3 border-bottom" ><strong class="text-muted">Shipping and handling</strong><strong>₹.00</strong></li>
		  <li class="d-flex justify-content-between py-3 border-bottom" ><strong class="text-muted">Tax</strong><strong>₹. 00</strong></li>
		  <li class="d-flex justify-content-between py-3 border-bottom" ><strong class="text-muted">Total</strong>
			<h2 class="font-weight-bold">₹ <span id="grandtotal" class="totalPrice" >{{grandtotal}}</span></h2>
		  </li> 
		  <br><a href="" class="btn btn-dark rounded-pill py-2 btn-block">Procceed to checkout</a>
		</ul>
		<a href="/" class="btn btn-primary cart-btn-transform m-3" style="background-color: #1877f2; ;height: 35px; width: 14rem; text-align:right" data-abc="true">continue shopping</a>
		
	  </div>

	</div>
  </div>
  <br>
</div>
</div>
</div>
		</div>
			
	</div>
</div>
</div>
{% endif %}
{% endblock %}
<!---footer--->
			<div class="footer-w3l">
				<div class="container">
					<div class="footer-grids">
						<div class="col-md-3 footer-grid">
									<h4>About </h4>
									<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
									<div class="social-icon">
										<a href="#"><i class="icon"></i></a>
										<a href="#"><i class="icon1"></i></a>
										<a href="#"><i class="icon2"></i></a>
										<a href="#"><i class="icon3"></i></a>
									</div>
								</div>
								<div class="col-md-3 footer-grid">
									<h4>My Account</h4>
									<ul>
										<li><a href="checkout.html">Checkout</a></li>
										<li><a href="login.html">Login</a></li>
										<li><a href="registered.html"> Create Account </a></li>
									</ul>
								</div>
								<div class="col-md-3 footer-grid">
									<h4>Information</h4>
									<ul>
										<li><a href="index.html">Home</a></li>
										<li><a href="products.html">Products</a></li>
										<li><a href="codes.html">Short Codes</a></li>
										<li><a href="mail.html">Mail Us</a></li>
										<li><a href="products1.html">products1</a></li>
									</ul>
								</div>
								<div class="col-md-3 footer-grid foot">
									<h4>Contacts</h4>
									<ul>
										<li><i class="glyphicon glyphicon-map-marker" aria-hidden="true"></i><a href="#">E Comertown Rd, Westby, USA</a></li>
										<li><i class="glyphicon glyphicon-earphone" aria-hidden="true"></i><a href="#">1 599-033-5036</a></li>
										<li><i class="glyphicon glyphicon-envelope" aria-hidden="true"></i><a href="mailto:example@mail.com"> example@mail.com</a></li>
										
									</ul>
								</div>
							<div class="clearfix"> </div>
							</div>
							
						</div>
					</div>
					<!---footer--->
					<!--copy-->
					<div class="copy-section">
						<div class="container">
							<div class="copy-left">
								<p>&copy; 2016 New Shop . All rights reserved | Design by <a href="http://w3layouts.com">W3layouts</a></p>
							</div>
							<div class="copy-right">
								<img src="{% static 'images/card.png' %}" alt=""/>
							</div>
							<div class="clearfix"></div>
						</div>
					</div>
				<!--copy-->
				
</body>
<script>$(document).ready(function(c) {
	$('.close1').on('click', function(c){
		$('.cart-header').fadeOut('slow', function(c){
			$('.cart-header').remove();
		});
		});	  
	});
</script>
<script>$(document).ready(function(c) {
	$('.close2').on('click', function(c){
			$('.cart-header2').fadeOut('slow', function(c){
		$('.cart-header2').remove();
	});
	});	  
	});
</script>
{% block script %}
<script>
	$(document).ready(function(){
	
	{% for item in cart %}
	
	  var quantity =  parseInt($('#qty{{item.id}}').val());
	  if (quantity <= 1)
		{
		  $('#minus{{item.id}}').prop('disabled', true);
		}
		else{
		  $('#minus{{item.id}}').prop('disabled', false);
		}
		{% endfor %}
	  });
	 
	
	  function plus(plusid){
		let quantity =  parseInt($('#qty'+plusid).val());
		console.log(quantity)
		if (quantity <= 1)
		{
		  $('#minus'+ plusid).prop('disabled', true);
		}
		else{
		  $('#minus'+ plusid).prop('disabled', false);
		}
		data={
		  "id":plusid,
		  "value": "add",
		  csrfmiddlewaretoken: '{{ csrf_token }}',
		}
	
		$.ajax({
			  url : '/edit_cart/',
			  type: "POST",
			  data : data,
			  dataType : "json",
			  success: function( data ){  
				let  total = parseInt(data.total) 
				let grandtotal = parseInt(data.grandtotal)
				console.log(total)
				$('#output'+plusid).html(total)
				$('#subtotal').html(grandtotal)
				$('#grandtotal').html(grandtotal)
	
			  }
		  });
	  }
	
	  function minus(minusid){
		let quantity =  parseInt($('#qty'+minusid).val());
		console.log(quantity)
		if (quantity <= 1)
		{
		  $('#minus'+ minusid).prop('disabled', true);
		}
		else{
		  $('#minus'+ minusid).prop('disabled', false);
		}
	
		data={
		  "id":minusid,
		  "value": "sub",
		  csrfmiddlewaretoken: '{{ csrf_token }}',
		}
	
		$.ajax({
			  url : '/edit_cart/',
			  type: "POST",
			  data : data,
			  dataType : "json",
			  success: function( data ){
				let  total = parseInt(data.total) 
				let grandtotal = parseInt(data.grandtotal)
				console.log(total)           
				$('#output'+minusid).html(total)
				$('#subtotal').html(grandtotal)
				$('#grandtotal').html(grandtotal)
				if (quantity <= 1)
		{
		  $('#minus'+ minusid).prop('disabled', true);
		}
		else{
		  $('#minus'+ minusid).prop('disabled', false);
		}
	
	
			  }
		  });
	  }

</script>
</html>

{% endblock %}